# OFW Application
Angular version 19.2.6

## 1.) Flow
| Route/Step                 | Description                                                                                                                                                                                                                                                                                                                                                                                                              |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Select product             | - **Product Service**: Set product<br>- Navigate to `/policy`                                                                                                                                                                                                                                                                                                                                                            |
| `/policy`                  | - if B (rehires) → quote<br>- if C (family shield) → quote2                                                                                                                                                                                                                                                                                                                                                              |
| `/policy/quote`            | **Used by rehires and compulsory**<br/>- Generate quote:<br>&nbsp;&nbsp;&nbsp;&nbsp;- Calculate months covered<br>&nbsp;&nbsp;&nbsp;&nbsp;- Calculate premium based on months covered and environment<br>&nbsp;&nbsp;&nbsp;&nbsp;- **Quote Calculator Service** → set quote __(but premium?) weird__<br>&nbsp;&nbsp;&nbsp;&nbsp;- **Insurance Environment Service** → set environment<br>- Navigate to `/policy/details` |
| `/policy/quote2`           | **Used by family shield**<br/>- Quote based on number of units                                                                                                                                                                                                                                                                                                                                                           |
| `/policy/detail`           | - Shows product details **(Product Service)**<br>- Remove `setEnvironment()`<br>- Navigate to `/policy/application-form`                                                                                                                                                                                                                                                                                                 |
| `/policy/application-form` | - Save values to session storage (app-form) <br>****Application Form Storage Service**<br>- Navigate to `/policy/review`                                                                                                                                                                                                                                                                                                 |
| `/policy/review`           | - Retrieve values from session storage <br> ****Application Form Storage Service**<br>- Map payload<br>- Continue:<br>&nbsp;&nbsp;&nbsp;&nbsp;- Save to backend<br>&nbsp;&nbsp;&nbsp;&nbsp;- Generate hash from ref code<br>&nbsp;&nbsp;&nbsp;&nbsp;- Generate **pesopay** form using hash<br>&nbsp;&nbsp;&nbsp;&nbsp;- Redirect to **pesopay**                                                                          |
| Pesopay                    | - Navigate to `/confirmation`                                                                                                                                                                                                                                                                                                                                                                                            |
| `/confirmation`            | - Page changes based on status (success, fail, cancel)                                                                                                                                                                                                                                                                                                                                                                   |

## 2.) Services
| No. | Service Name             | Description                                                  |
|-----|--------------------------|--------------------------------------------------------------|
| 1   | Application Builder      | Post data<br>Generate Hash                                   |
| 2   | Application Form Storage| Stores application form data                                 |
| 3   | Insurance Environment    | Determines if insurance is for land or sea                   |
| 4   | Product                  | Holds product key or ID                                      |
| 5   | Quote Calculator         | Stores the premium or quote                                  |
| 6   | Quote Details            | For rehires, takes in start and end date                     |
| 7   | Time Helper              | Calculates number of months <br>Used by rehires / compulsory |
